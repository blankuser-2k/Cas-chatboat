<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CAS Chatbot - College of Applied Science, Vattamkulam</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.chat-container{
  width:100%;
  max-width:420px;
  height:95vh;
  background:#f5f7fb;
  border-radius:14px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* HEADER */
.header{
  background:#0a58ca;
  color:#fff;
  padding:12px;
  text-align:center;
  font-weight:bold;
}
.header span{font-size:12px;display:block}

/* SUGGEST GRID */
.suggest-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  padding:10px;
}
.suggest{
  background:#e8f0ff;
  border-radius:12px;
  padding:10px 5px;
  text-align:center;
  cursor:pointer;
}
.suggest .emoji{font-size:20px}
.suggest .label{font-size:11px}

/* CHAT */
#chatbox{
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg{
  max-width:80%;
  padding:10px;
  margin:6px 0;
  border-radius:12px;
  line-height:1.4;
}
.user{
  background:#0a58ca;
  color:white;
  margin-left:auto;
}
.bot{
  background:#e0e0e0;
  color:black;
}

/* INPUT AREA */
.autosuggest-wrap{padding:8px;border-top:1px solid #ddd}
.input-area{
  display:flex;
  gap:6px;
}
input{
  flex:1;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  border:none;
  border-radius:8px;
  padding:0 10px;
  cursor:pointer;
}
.btn-send{background:#0a58ca;color:white}
.btn-voice{background:#198754;color:white}

/* AUTOSUGGEST */
.suggest-list{
  background:white;
  border:1px solid #ccc;
  border-radius:8px;
  margin-top:5px;
}
.suggest-item{
  padding:8px;
  cursor:pointer;
}
.suggest-item:hover{background:#e8f0ff}

/* VOICE BAR */
.voice-wave{
  height:4px;
  background:linear-gradient(90deg,#000,#fff);
  animation:move 1s linear infinite;
  display:none;
}
@keyframes move{
  from{background-position:0}
  to{background-position:200px}
}

/* VOLUME BUTTON */
.volume-btn{
  position:absolute;
  bottom:90px;
  right:15px;
  background:black;
  color:white;
  padding:8px;
  border-radius:50%;
  cursor:pointer;
}
.volume-btn.active{background:green}
</style>
</head>

<body>
<div class="chat-container">

<div class="header">
ğŸ¤– CAS Chatbot
<span>College of Applied Science, Vattamkulam</span>
</div>

<div class="suggest-grid" id="suggestGrid">
  <div class="suggest" data-q="address"><div class="emoji">ğŸ“</div><div class="label">Address</div></div>
  <div class="suggest" data-q="courses"><div class="emoji">ğŸ“</div><div class="label">Courses</div></div>
  <div class="suggest" data-q="fees"><div class="emoji">ğŸ’°</div><div class="label">Fees</div></div>
  <div class="suggest" data-q="admission"><div class="emoji">ğŸ“</div><div class="label">Admission</div></div>
  <div class="suggest" data-q="departments"><div class="emoji">ğŸ«</div><div class="label">Departments</div></div>
  <div class="suggest" data-q="clubs"><div class="emoji">âš¡</div><div class="label">Clubs</div></div>
  <div class="suggest" data-q="contact"><div class="emoji">ğŸ“</div><div class="label">Contact</div></div>
  <div class="suggest" data-q="cas"><div class="emoji">â„¹ï¸</div><div class="label">What is CAS</div></div>
</div>

<div id="chatbox"></div>

<div class="autosuggest-wrap">
<div class="voice-wave" id="voiceWave"></div>

<div class="input-area">
<input id="userInput" placeholder="Type your question..." />
<button class="btn-voice" id="voiceBtn">ğŸ¤</button>
<button class="btn-send" id="sendBtn">Send</button>
</div>

<div id="suggestList" class="suggest-list" style="display:none"></div>
</div>

<div class="volume-btn" id="volumeBtn">ğŸ”Š</div><script>
const chatbox=document.getElementById("chatbox");
const input=document.getElementById("userInput");
const suggestList=document.getElementById("suggestList");
const voiceWave=document.getElementById("voiceWave");
let speakEnabled=false;
let lastBotText="";

/* DATABASE */
const db={
  "cas":"CAS means College of Applied Science. This college is managed by IHRD and affiliated to University of Calicut.",
  "address":"ğŸ“ Nellissery, Sukapuram P.O, Edappal, Malappuram, Kerala â€“ 679576",
  "contact":"ğŸ“ 0494-2689655 / 8547006802\nğŸ“§ casvattamkulam@ihrd.ac.in",
  "courses":"ğŸ“ UG: BCA, B.Sc Computer Science, B.Sc Electronics, B.Com CA\nğŸ“ PG: M.Sc Computer Science, M.Com Finance",
  "departments":"ğŸ« Computer Science, Commerce, Electronics, Physical Education, General Department",
  "clubs":"âš¡ NSS, Placement Cell, Women Cell, Anti-Ragging Cell, Literary Club, Associations",
  "fees":"ğŸ’° Fees depend on course. Type 'BCA fee', 'MSc fee' etc.",
  "bca fee":"BCA total semester fee is â‚¹17,000 (excluding PTA & university fees)",
  "msc fee":"M.Sc Computer Science total semester fee is â‚¹22,500",
  "admission":"ğŸ“ Admissions through Calicut University Single Window & IHRD portal",
  "pg admission":"PG admission after UG result publication",
  "ug admission":"UG admission after +2 results",
  "parking":"ğŸš— College has parking facilities for students and staff",
  "library":"ğŸ“š College has a well-equipped library",
  "nss":"NSS is active and part of student activities"
};

const keywords=Object.keys(db);

/* CHAT FUNCTIONS */
function addMsg(text,cls){
  const div=document.createElement("div");
  div.className="msg "+cls;
  div.innerText=text;
  chatbox.appendChild(div);
  chatbox.scrollTop=chatbox.scrollHeight;
  if(cls==="bot"){
    lastBotText=text;
    if(speakEnabled) speak(text);
  }
}

function getReply(q){
  q=q.toLowerCase();
  for(let k in db){
    if(q.includes(k)) return db[k];
  }
  return " I couldnâ€™t find exact details for that request.
Please ensure you entered the correct information or select Contact to get official details.";
}

/* SEND */
document.getElementById("sendBtn").onclick=()=>{
  const text=input.value.trim();
  if(!text) return;
  addMsg(text,"user");
  input.value="";
  setTimeout(()=>addMsg(getReply(text),"bot"),400);
  suggestList.style.display="none";
};

/* SUGGEST GRID */
document.querySelectorAll(".suggest").forEach(s=>{
  s.onclick=()=>{input.value=s.dataset.q;document.getElementById("sendBtn").click();}
});

/* AUTO SUGGEST */
input.oninput=()=>{
  const v=input.value.toLowerCase();
  if(!v){suggestList.style.display="none";return;}
  suggestList.innerHTML="";
  keywords.filter(k=>k.includes(v)).forEach(k=>{
    const d=document.createElement("div");
    d.className="suggest-item";
    d.innerText=k;
    d.onclick=()=>{input.value=k;document.getElementById("sendBtn").click();}
    suggestList.appendChild(d);
  });
  suggestList.style.display=suggestList.children.length?"block":"none";
};

/* VOICE INPUT */
const rec=window.SpeechRecognition||window.webkitSpeechRecognition;
if(rec){
  const r=new rec();
  r.onstart=()=>voiceWave.style.display="block";
  r.onend=()=>voiceWave.style.display="none";
  r.onresult=e=>input.value=e.results[0][0].transcript;
  document.getElementById("voiceBtn").onclick=()=>r.start();
}

/* SPEAK */
function speak(text){
  const u=new SpeechSynthesisUtterance(text);
  speechSynthesis.speak(u);
}
document.getElementById("volumeBtn").onclick=function(){
  speakEnabled=!speakEnabled;
  this.classList.toggle("active");
  if(speakEnabled && lastBotText) speak(lastBotText);
};
</script>

</div>
</body>
  </html>
