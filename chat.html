<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CAS Chat â€” College of Applied Science, Vattamkulam</title>

<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --rose: #ff9acb;
    --blue: #6ea8ff;
    --accent-blue: #0b63ff;        /* user bubble */
    --user-text: #000000;          /* user text black */
    --bot-bg: #000000;             /* bot bubble black */
    --bot-green: #39ff14;          /* bot text green */
    --glass: rgba(255,255,255,0.92);
    --input-bg: rgba(255,255,255,0.96);
    --suggest-grad: linear-gradient(135deg, #00ff99, #00aaff);
    --suggest-text: #05264a;
    --scroll-suggest-grad: linear-gradient(135deg,#00ff66,#0099ff);
    --scroll-suggest-text: #ffeb3b;
  }

  html,body { height:100%; margin:0; font-family:"Poppins",system-ui,Arial,sans-serif; -webkit-font-smoothing:antialiased; }
  body{
    background: linear-gradient(135deg, var(--rose) 0%, #ffd7e6 30%, #cfe7ff 70%, var(--blue) 100%);
    display:flex; align-items:center; justify-content:center; padding:14px; box-sizing:border-box;
  }

  .wrap{
    width:100%;
    max-width:980px;
    height:92vh;
    display:flex; flex-direction:column;
    border-radius:16px;
    overflow:hidden;
    box-shadow: 0 22px 50px rgba(8,20,40,0.18);
    background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.65));
    border: 1px solid rgba(255,255,255,0.2);
  }

  header{
    display:flex; gap:14px; align-items:center; padding:14px 18px;
    background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  }
  .logo{ width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; background:white; }
  .logo .cas{ font-family:"Abril Fatface", serif; color:var(--accent-blue); font-size:20px; }
  .head-text{ display:flex; flex-direction:column; }
  .head-text .title{ font-weight:700; color:#060606; font-size:18px; }
  .head-text .sub{ font-size:12px; color:rgba(0,0,0,0.6); }

  .body{ padding:12px; display:flex; flex-direction:column; gap:12px; height:100%; box-sizing:border-box; }

  /* new scrollable suggestion box */
  .scroll-suggest-box{
    display:none; /* only on small screens */
    flex-wrap: nowrap;
    overflow-x:auto;
    padding:6px;
    gap:6px;
    border-radius:12px;
    scroll-behavior:smooth;
    -webkit-overflow-scrolling:touch;
    margin-bottom:6px;
    background: rgba(255,255,255,0.1);
  }
  .scroll-suggest-box .suggest{
    flex: 0 0 auto;
    min-width: 48%;
    background: var(--scroll-suggest-grad);
    color: var(--scroll-suggest-text);
    font-weight:700;
    border-radius:14px;
    text-align:center;
    padding:10px 8px;
    cursor:pointer;
    box-shadow:0 6px 16px rgba(0,0,0,0.1);
    transition: transform .12s ease;
  }
  .scroll-suggest-box .suggest:active{
    transform: translateY(2px);
  }

  #chatbox{ flex:1; overflow:auto; padding:12px; display:flex; flex-direction:column; gap:12px; -webkit-overflow-scrolling:touch; }

  .msg-row{ display:flex; }
  .msg-row.bot{ justify-content:flex-start; }
  .msg-row.you{ justify-content:flex-end; }

  .bubble{
    padding:12px 14px; border-radius:18px; max-width:78%; word-wrap:break-word; font-size:15px; line-height:1.35;
    box-shadow: 0 8px 26px rgba(11,30,60,0.06);
    white-space: pre-wrap;
  }
  .bubble.you{ background: var(--accent-blue); color: var(--user-text); border-bottom-right-radius:6px; border-bottom-left-radius:18px; }
  .bubble.bot{ background: var(--bot-bg); color: var(--bot-green); border-bottom-left-radius:6px; border-bottom-right-radius:18px; }

  .typing{ padding:8px 10px; border-radius:12px; background: rgba(0,0,0,0.85); display:inline-flex; gap:6px; align-items:center; }
  .dot{ width:7px; height:7px; border-radius:50%; background:var(--bot-green); animation: blink 1s infinite; }
  .dot:nth-child(2){ animation-delay:.2s; } .dot:nth-child(3){ animation-delay:.4s; }
  @keyframes blink{ 0%{opacity:.2} 50%{opacity:1} 100%{opacity:.2} }

  .input-area{ display:flex; gap:10px; align-items:center; padding:10px; background: linear-gradient(180deg, rgba(255,255,255,0.62), rgba(255,255,255,0.44)); }
  #userInput{ flex:1; height:48px; padding:12px 16px; border-radius:28px 6px 28px 6px; border:none; outline:none; background:var(--input-bg); font-size:15px; }
  .btn-send{ min-width:92px; height:44px; border-radius:10px; border:none; cursor:pointer; font-weight:700; color:white;
    background: var(--suggest-grad); box-shadow: 0 10px 26px rgba(0,160,200,0.12); }

  .autosuggest-wrap{ position:relative; }
  .suggest-list{ position:absolute; left:8px; right:8px; bottom:64px; display:flex; flex-direction:column; gap:8px; padding:10px; background:white; border-radius:10px; box-shadow:0 12px 40px rgba(11,30,60,0.08); z-index:45; }
  .suggest-item{ padding:8px 10px; border-radius:8px; cursor:pointer; font-size:14px; color:#082a4a; font-weight:600; }
  .suggest-item:hover{ background: #f0fbff; }

  @media (max-width:720px){
    .wrap{ height:96vh; border-radius:12px; }
    .suggest{ min-height:84px; }
    .bubble{ font-size:14px; }
    #userInput{ height:44px; font-size:14px; }

    /* show scrollable suggestion box */
    .scroll-suggest-box{ display:flex; }
    .suggest-grid{ display:none; }
  }
</style>
</head>
<body>
  <div class="wrap" role="application" aria-label="CAS chatbot">
    <header>
      <div class="logo"><div class="cas">CAS</div></div>
      <div class="head-text">
        <div class="title">CHATBOT - CAS</div>
        <div class="sub">College of Applied Science, Vattamkulam</div>
      </div>
    </header>

    <div class="body">
      <div class="scroll-suggest-box" id="scrollSuggest">
        <div class="suggest" data-q="timing">Timing</div>
        <div class="suggest" data-q="address">Address</div>
        <div class="suggest" data-q="courses">Courses</div>
        <div class="suggest" data-q="fees">Fees</div>
        <div class="suggest" data-q="admission">Admission</div>
        <div class="suggest" data-q="departments">Departments</div>
        <div class="suggest" data-q="clubs">Clubs & Activities</div>
        <div class="suggest" data-q="contact">Contact</div>
        <div class="suggest" data-q="scholarship">Scholarship</div>
        <div class="suggest" data-q="exams">Exams / Syllabus</div>
      </div>

      <div id="chatbox" role="log" aria-live="polite"></div>

      <div class="autosuggest-wrap">
        <div class="input-area">
          <input id="userInput" type="text" placeholder="Type a question (e.g. 'BCA fee', 'PG admission', 'What is CAS?')" autocomplete="off" />
          <button class="btn-send" id="sendBtn" aria-label="Send">Send</button>
        </div>
        <div id="suggestList" class="suggest-list" style="display:none;"></div>
      </div>
    </div>
  </div>
<script>
const chatbox = document.getElementById('chatbox');
const input = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const suggestList = document.getElementById('suggestList');
const scrollSuggest = document.getElementById('scrollSuggest');

/* function to append messages */
function append(kind,text){
  const row = document.createElement('div');
  row.className='msg-row '+(kind==='you'?'you':'bot');
  const bubble = document.createElement('div');
  bubble.className='bubble '+(kind==='you'?'you':'bot');
  bubble.innerText=text;
  row.appendChild(bubble);
  chatbox.appendChild(row);
  chatbox.scrollTop=chatbox.scrollHeight;
}

function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[c])); }

function appendBotHTML(text){
  const row = document.createElement('div'); row.className='msg-row bot';
  const bubble = document.createElement('div'); bubble.className='bubble bot';
  bubble.innerHTML = escapeHtml(text).replace(/\n/g,'<br>');
  row.appendChild(bubble);
  chatbox.appendChild(row);
  chatbox.scrollTop=chatbox.scrollHeight;
}

/* typing indicator */
function showTyping(){
  const row = document.createElement('div'); row.className='msg-row bot';
  const wrap = document.createElement('div'); wrap.className='typing';
  for(let i=0;i<3;i++){ const d=document.createElement('span'); d.className='dot'; wrap.appendChild(d);}
  row.appendChild(wrap); chatbox.appendChild(row);
  chatbox.scrollTop=chatbox.scrollHeight;
  return row;
}

/* ---------------------------
   Knowledge base & course fees
----------------------------*/
const KB = [
  { q: ["what is cas","cas means","cas meaning","cas"], a: "CAS stands for College of Applied Science, Vattamkulam." },
  { q: ["address","location","where"], a:
    "College Address:\nThe Principal,\nCollege of Applied Science, Vattamkulam, Nellissery, Sukapuram (P.O.), Edappal, Malappuram, Kerala, PIN - 679576" },
  { q: ["phone","contact","telephone","call","office"], a: "Phone: 0494 2689655" },
  { q: ["email","mail"], a: "Email: casvattamkulam@ihrd.ac.in" },
  { q: ["time","timing","hours","college time"], a: "College time is 9:30 AM to 3:45 PM (Monday to Friday)." },
  { q: ["courses","what courses","available courses"], a: "Courses offered:\nâ€¢ B.Sc (Computer Science)\nâ€¢ B.Sc (Electronics)\nâ€¢ BCA\nâ€¢ B.Com with Computer Application\nâ€¢ M.Sc (Computer Science)\nâ€¢ M.Com (Finance)" },
  { q: ["departments","department","which departments"], a:
    "Departments:\nâ€¢ Department of Commerce\nâ€¢ Department of Computer Science\nâ€¢ Department of Electronics\nâ€¢ General Department\nâ€¢ Department of Physical Education" },
  { q: ["clubs","activities","nss","pta","placement","women cell","anti-ragging","union","literary","grievance"],
    a: "Clubs & Activities:\nâ€¢ NSS, PTA, Placement Cell, Women Cell, Anti-Ragging Cell, College Union, Boomitresena Club, ED Club, Students Grievance Redressal, Literary Club" },
  { q: ["exams","syllabus","exam"], a: "Exams & syllabus are provided and conducted by Calicut University." },
  { q: ["scholarship","scholarships"], a: "Scholarships are available for eligible students. Contact the college office for details." },
  { q: ["admission","how to apply","apply"], a:
`Admission summary:
UG Admission:
â€¢ After +2 results.
â€¢ Seats: B.Sc CS - 36; BCA - 24; B.Sc Electronics - 36; B.Com - 60.
â€¢ 50% seats via Calicut University single-window; 50% via IHRD portal (www.ihrdadmissions.org)

PG Admission:
â€¢ After UG results.
â€¢ Seats: M.Sc CS - 10; M.Com Finance - 15.
â€¢ 50% seats via Calicut University single-window; 50% via IHRD portal (www.ihrdadmissions.org)` },
  { q: ["fee","fees","fee structure","fee details"], a: "Fee structure depends on the course. Ask a specific course fee: e.g. 'BCA fee', 'B.Sc Computer Science fee', 'B.Com fee', 'M.Sc fee', 'M.Com fee'." }
];

const COURSE_FEES = {
  "b.com": `B.Com â€” Total: â‚¹11,200`,
  "b.sc cs": `B.Sc CS â€” Total: â‚¹17,000`,
  "b.sc electronics": `B.Sc Electronics â€” Total: â‚¹17,000`,
  "bca": `BCA â€” Total: â‚¹17,000`,
  "msc": `M.Sc CS â€” Total: â‚¹22,500`,
  "mcom": `M.Com â€” Total: â‚¹20,525`
};

/* ---------------------------
   Knowledge search & logic
----------------------------*/
function findResponse(text){
  const t=text.trim().toLowerCase();

  if(/\b(hi|hello|hey|hii)\b/.test(t)) return "Hello! How can I help you today? Try suggestions or ask something like 'BCA fee' or 'PG admission'.";
  if(/\b(thank|thanks|thank you)\b/.test(t)) return "You're welcome ðŸ˜Š";
  if(/\b(how are you)\b/.test(t)) return "I'm here to help you with college info. How can I help?";

  if(/\bbca\b/.test(t) && t.includes('fee')) return COURSE_FEES['bca'];
  if(/\bb\.?com\b/.test(t) && t.includes('fee')) return COURSE_FEES['b.com'];
  if((/\bbsc\b/.test(t) || t.includes('computer science')) && t.includes('fee')){
    if(t.includes('elect')) return COURSE_FEES['b.sc electronics'];
    return COURSE_FEES['b.sc cs'];
  }
  if(/\bmsc\b/.test(t) && t.includes('fee')) return COURSE_FEES['msc'];
  if(/\bm\.?com\b/.test(t) && t.includes('fee')) return COURSE_FEES['mcom'];

  for(const item of KB){
    for(const key of item.q){
      if(t.includes(key)) return item.a;
    }
  }
  return "I understand your question but this detail is not in my data. Please contact the college office:\nPhone: 0494 2689655\nEmail: casvattamkulam@ihrd.ac.in";
}

/* ---------------------------
   Suggestion & input
----------------------------*/
function getSuggestions(prefix){
  const p=prefix.trim().toLowerCase();
  if(!p||p.length<2) return [];
  const suggestions=new Set();
  const quick=["Timing","Address","Courses","Departments","Fees","Admission","PG admission","UG admission","Contact","Scholarship","Exams / syllabus", "BCA fee", "B.Sc fee", "M.Com fee"];
  quick.forEach(q=>{ if(q.toLowerCase().includes(p)) suggestions.add(q); });
  return Array.from(suggestions).slice(0,8);
}

function displaySuggestions(){
  const prefix=input.value.trim();
  const suggestions=getSuggestions(prefix);
  suggestList.innerHTML='';

  if(suggestions.length===0 || prefix.length===0){
    suggestList.style.display='none';
    return;
  }

  suggestions.forEach(s=>{
    const item=document.createElement('div');
    item.className='suggest-item';
    item.innerText=s;
    item.addEventListener('click', ()=>{
      input.value=s;
      sendFromInput();
    });
    suggestList.appendChild(item);
  });

  suggestList.style.display='flex';
}

/* Add input event listener for real-time suggestions */
input.addEventListener('input', displaySuggestions);
/* Hide suggestions on focus change, unless clicking one */
input.addEventListener('blur', ()=>{
  // Add a small delay so that suggestion click has time to register
  setTimeout(()=>suggestList.style.display='none', 200);
});
input.addEventListener('focus', displaySuggestions);


/* scrollable suggestion click */
scrollSuggest.querySelectorAll('.suggest').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    input.value=btn.getAttribute('data-q');
    sendFromInput();
  });
});

/* send button / enter */
sendBtn.addEventListener('click', ()=> sendFromInput());
input.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); sendFromInput(); } });

async function sendFromInput(){
  const text=input.value.trim();
  if(!text) return;
  append('you',text);
  input.value='';
  suggestList.style.display='none';
  const typingNode=showTyping();
  await new Promise(r=>setTimeout(r,700));
  typingNode.remove();
  const answer=findResponse(text);
  appendBotHTML(answer);
}

/* initial greeting */
appendBotHTML("Hello! I am the CAS chatbot â€” ask about timings, courses, fees, admissions, departments or type a question like 'BCA fee' or 'PG admission'.");
</script>
</body>
</html>

                                                       
