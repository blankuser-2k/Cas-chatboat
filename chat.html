<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CAS Chatbot - College of Applied Science, Vattamkulam</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.chat-container{
  width:100%;
  max-width:420px;
  height:95vh;
  background:#f5f7fb;
  border-radius:14px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.header{
  background:#0a58ca;
  color:#fff;
  padding:12px;
  text-align:center;
  font-weight:bold;
}
.header span{font-size:12px;display:block}

.suggest-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  padding:10px;
}
.suggest{
  background:linear-gradient(135deg,#1e90ff,#ff4b4b);
  color:white;
  border-radius:12px;
  padding:10px 5px;
  text-align:center;
  cursor:pointer;
}
.suggest .emoji{font-size:20px}
.suggest .label{font-size:11px}

#chatbox{
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg{
  max-width:80%;
  padding:10px;
  margin:6px 0;
  border-radius:12px;
  line-height:1.4;
}
.user{
  background:#0a58ca;
  color:white;
  margin-left:auto;
}
.bot{
  background:#198754;
  color:white;
}

.autosuggest-wrap{padding:8px;border-top:1px solid #ddd}
.input-area{
  display:flex;
  gap:6px;
}
input{
  flex:1;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  border:none;
  border-radius:8px;
  padding:0 10px;
  cursor:pointer;
}
.btn-send{background:#0a58ca;color:white}
.btn-voice{background:#198754;color:white}

.suggest-list{
  background:white;
  border:1px solid #ccc;
  border-radius:8px;
  margin-top:5px;
}
.suggest-item{
  padding:8px;
  cursor:pointer;
}
.suggest-item:hover{background:#e8f0ff}

.voice-wave{
  height:4px;
  background:linear-gradient(90deg,#000,#fff);
  animation:move 1s linear infinite;
  display:none;
}
@keyframes move{
  from{background-position:0}
  to{background-position:200px}
}

.volume-btn{
  position:absolute;
  bottom:90px;
  right:15px;
  background:black;
  color:white;
  padding:8px;
  border-radius:50%;
  cursor:pointer;
}
.volume-btn.active{background:green}
</style>
</head>

<body>
<div class="chat-container">

<div class="header">
ğŸ¤– CAS Chatbot
<span>College of Applied Science, Vattamkulam</span>
</div>

<div class="suggest-grid" id="suggestGrid">
  <div class="suggest" data-q="address"><div class="emoji">ğŸ“</div><div class="label">Address</div></div>
  <div class="suggest" data-q="courses"><div class="emoji">ğŸ“</div><div class="label">Courses</div></div>
  <div class="suggest" data-q="fees"><div class="emoji">ğŸ’°</div><div class="label">Fees</div></div>
  <div class="suggest" data-q="admission"><div class="emoji">ğŸ“</div><div class="label">Admission</div></div>
  <div class="suggest" data-q="departments"><div class="emoji">ğŸ«</div><div class="label">Departments</div></div>
  <div class="suggest" data-q="clubs"><div class="emoji">âš¡</div><div class="label">Clubs</div></div>
  <div class="suggest" data-q="contact"><div class="emoji">ğŸ“</div><div class="label">Contact</div></div>
  <div class="suggest" data-q="cas"><div class="emoji">â„¹ï¸</div><div class="label">What is CAS</div></div>
</div>

<div id="chatbox"></div>

<div class="autosuggest-wrap">
<div class="voice-wave" id="voiceWave"></div>

<div class="input-area">
<input id="userInput" placeholder="Type your question..." />
<button class="btn-voice" id="voiceBtn">ğŸ¤</button>
<button class="btn-send" id="sendBtn">Send</button>
</div>

<div id="suggestList" class="suggest-list" style="display:none"></div>
</div>

<div class="volume-btn" id="volumeBtn">ğŸ”Š</div>

<script>
const chatbox=document.getElementById("chatbox");
const input=document.getElementById("userInput");
const suggestList=document.getElementById("suggestList");
const voiceWave=document.getElementById("voiceWave");

let speakEnabled=false;
let allowSpeakFromNow=false;
let synth=window.speechSynthesis;

/* DATABASE */
const db={"cas":"CAS means College of Applied Science. This college is managed by IHRD and affiliated to University of Calicut.",
  "address":"ğŸ“ Nellissery, Sukapuram P.O, Edappal, Malappuram, Kerala â€“ 679576",
  "contact":"ğŸ“ 0494-2689655 / 8547006802\nğŸ“§ casvattamkulam@ihrd.ac.in",

  "courses":"ğŸ“ UG: BCA, B.Sc Computer Science, B.Sc Electronics, B.Com CA\nğŸ“ PG: M.Sc Computer Science, M.Com Finance",
  "departments":"ğŸ« Computer Science, Commerce, Electronics, Physical Education, General Department",
  "clubs":"âš¡ NSS, Placement Cell, Women Cell, Anti-Ragging Cell, Literary Club, Associations",

  "fees":"ğŸ’° Fees depend on course. Type BCA fee, B.Sc fee, M.Com fee etc.",

  "bca":"ğŸ“ BCA â€“ 4 Years\nEligibility: +2 with Maths/CS",
  "bca fee":"ğŸ’° BCA Fee\nSemester Fee: â‚¹17,270\nAdmission Fee: â‚¹330\nCaution Deposit: â‚¹1,000",

  "bsc computer science":"ğŸ“ B.Sc Computer Science â€“ 4 Years",
  "bsc computer science fee":"ğŸ’° Semester Fee: â‚¹17,270",

  "bsc electronics":"ğŸ“ B.Sc Electronics â€“ 3 Years",
  "bsc electronics fee":"ğŸ’° Semester Fee: â‚¹17,270",

  "bcom":"ğŸ“ B.Com (Computer Application)",
  "bcom fee":"ğŸ’° Semester Fee: â‚¹13,035",

  "mcom":"ğŸ“ M.Com Finance â€“ 2 Years",
  "m.com fee":"ğŸ’° Semester Fee: â‚¹18,425\nAdmission Fee: â‚¹1,100",

  "msc":"ğŸ“ M.Sc Computer Science â€“ 2 Years",
  "msc fee":"ğŸ’° Semester Fee: â‚¹22,550",

  "parking":"ğŸš— College has parking facilities",
  "library":"ğŸ“š Well-equipped library",
  "nss":"NSS is active and part of student activities",

  "admission":"ğŸ“ Admission details available after results.\nApply via Calicut University SWS and IHRD portal."
};

const keywords=Object.keys(db);

function normalize(text){
  return text.toLowerCase().replace(/\s+/g,"").replace(/s$/,"");
}

function addMsg(text,cls){
  const div=document.createElement("div");
  div.className="msg "+cls;
  div.innerText=text;
  chatbox.appendChild(div);
  chatbox.scrollTop=chatbox.scrollHeight;

  if(cls==="bot" && speakEnabled && allowSpeakFromNow){
    speak(text);
  }
}

function getReply(q){
  const text=q.toLowerCase().trim();
  const clean=normalize(text);

  if(["hi","hello","hey"].includes(text)){
    return "Hello! Welcome to College of Applied Science, Vattamkulam. How can I help you today?";
  }
  if(text.includes("thank")){
    return "You're welcome! Happy to help you ğŸ˜Š";
  }

  for(let k in db){
    const key=normalize(k);
    if(clean.includes(key) || key.includes(clean)){
      return db[k];
    }
  }
  return "Please ensure that you entered the correct details or select Contact to get contact information.";
}

sendBtn.onclick=()=>{
  const text=input.value.trim();
  if(!text) return;
  addMsg(text,"user");
  input.value="";
  setTimeout(()=>addMsg(getReply(text),"bot"),400);
  suggestList.style.display="none";
};

document.querySelectorAll(".suggest").forEach(s=>{
  s.onclick=()=>{input.value=s.dataset.q;sendBtn.click();}
});

input.oninput=()=>{
  const v=input.value.toLowerCase();
  if(!v){suggestList.style.display="none";return;}
  suggestList.innerHTML="";
  keywords.filter(k=>k.includes(v)).forEach(k=>{
    const d=document.createElement("div");
    d.className="suggest-item";
    d.innerText=k;
    d.onclick=()=>{input.value=k;sendBtn.click();}
    suggestList.appendChild(d);
  });
  suggestList.style.display=suggestList.children.length?"block":"none";
};

const rec=window.SpeechRecognition||window.webkitSpeechRecognition;
if(rec){
  const r=new rec();
  r.onstart=()=>voiceWave.style.display="block";
  r.onend=()=>voiceWave.style.display="none";
  r.onresult=e=>input.value=e.results[0][0].transcript;
  voiceBtn.onclick=()=>r.start();
}

function speak(text){
  synth.cancel();
  synth.speak(new SpeechSynthesisUtterance(text));
}

volumeBtn.onclick=function(){
  speakEnabled=!speakEnabled;
  this.classList.toggle("active");
  if(speakEnabled) allowSpeakFromNow=true;
  else synth.cancel();
};
</script>
</div>
</body>
</html>
